### Context API


### Context API

The Context API is a neat way to pass state across the app without having to use props. The Context API was introduced to allow you to pass state (and enable the state to update) across the app, without having to use props for it.

# Creating new context

In contexts/collections/collections.context

import { createContext } from 'react';
import collections from './shop.data';

const CollectionsContext = createContext(collections);

export default CollectionsContext;

(mapStateToProps)
# Consuming context with Consumer Component

import CollectionsContext from '../../contexts/collections/collections.context';

<CollectionsContext.Consumer>
{
    collections => {
        return jsx;
    }
}
</CollectionsContext.Consumer>

import React from 'react';

import CollectionItem from '../../components/collection-item/collection-item.component';

import CollectionsContext from '../../contexts/collections/collections.context';

import './collection.styles.scss';

const CollectionPage = ({ match }) => {
    const renderCollectionItem = items => {
        return items.map(item => <CollectionItem key={item.id} item={item} />);
    };
    return (
        <CollectionsContext.Consumer>
            {collections => {
                const collection = collections[match.params.collectionType];
                const { title, items } = collection;

                return (
                    <div className="collection-page">
                        <h2 className="title">{title}</h2>
                        <div className="items">{renderCollectionItem(items)}</div>
                    </div>
                );
            }}
        </CollectionsContext.Consumer>
    );
};

export default CollectionPage;

Wrap it around where we want to use state

# Consuming context with useContext

import { useContext } from 'react';

const collections = useContext(CollectionsContext);

import React, { useContext } from 'react';
import CollectionItem from '../../components/collection-item/collection-item.component';
import CollectionsContext from '../../contexts/collections/collections.context';
import './collection.styles.scss';

const CollectionPage = ({ match }) => {
    const collections = useContext(CollectionsContext);
    const collection = collections[match.params.collectionType];
    const { title, items } = collection;

    const renderCollectionItem = () => {
        return items.map(item => <CollectionItem key={item.id} item={item} />);
    };
    return (
        <div className="collection-page">
            <h2 className="title">{title}</h2>
            <div className="items">{renderCollectionItem()}</div>
        </div>
    );
};

export default CollectionPage;

(mapDispatchToProps)
# Setting Actions in Context

We need to have component state
<CollectionsContext.Provider value={this.state.user}>
</CollectionsContext.Provider>

Consumer looks for Provider in tree